

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Client &mdash; Python Citrination Client 6.4.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Models Client Examples" href="models_examples.html" />
    <link rel="prev" title="Initialization" href="initialization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Python Citrination Client
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="initialization.html">Initialization</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uploading-files">Uploading Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#uploading-a-file-to-citrination">Uploading a File To Citrination</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uploading-a-file-to-citrination-under-a-new-name">Uploading a File To Citrination Under a New Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uploading-a-directory-to-citrination">Uploading a Directory To Citrination</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uploading-a-directory-to-citrination-under-a-new-name">Uploading a Directory To Citrination Under a New Name</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#selecting-a-custom-ingester">Selecting a Custom Ingester</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#finding-an-ingester-by-id">Finding an Ingester by ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#finding-an-ingester-by-searching-its-attributes">Finding an Ingester by Searching its Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#viewing-an-ingester-s-arguments">Viewing an Ingester’s Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#uploading-data-using-a-custom-ingester">Uploading Data Using a Custom Ingester</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ingesting-without-ingester-arguments">Ingesting Without Ingester Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ingesting-with-ingester-arguments">Ingesting With Ingester Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uploading-using-the-template-csv-ingester">Uploading Using the Template CSV Ingester</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#checking-the-ingest-status-of-a-dataset">Checking the Ingest Status of a Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieving-files">Retrieving Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#file-download-urls">File Download URLs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pif-retrieval">PIF Retrieval</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dataset-manipulation">Dataset Manipulation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="models_examples.html">Models Client Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="search_examples.html">Search Client Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="view_examples.html">Data Views Client</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/modules.html">Module Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Citrination Client</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="tutorial.html">Tutorial</a> &raquo;</li>
        
      <li>Data Client</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorial/data_examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-client">
<h1>Data Client<a class="headerlink" href="#data-client" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">DataClient</span></code> is the section of PyCC that allows you to manage your data
on Citrination. To access the data client, instantiate <code class="docutils literal notranslate"><span class="pre">CitrinationClient</span></code> and read the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">citrination_client</span> <span class="k">import</span> <span class="n">CitrinationClient</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="k">import</span> <span class="n">environ</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">CitrinationClient</span><span class="p">(</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;CITRINATION_API_KEY&quot;</span><span class="p">],</span> <span class="n">environ</span><span class="p">[</span><span class="s2">&quot;CITRINATION_SITE&quot;</span><span class="p">])</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
<div class="section" id="uploading-files">
<h2>Uploading Files<a class="headerlink" href="#uploading-files" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DataClient</span></code> class exposes a method, <code class="docutils literal notranslate"><span class="pre">.upload</span></code> which allows you to
upload a file or a directory to a dataset on Citrination using the “default”
ingester. This method is useful for uploading JSON files that follow the PIF
schema, as well as files that do not require additional processing with a custom
ingester.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>For files that require additional processing, see the documentation for the
<code class="docutils literal notranslate"><span class="pre">upload_with_ingester</span></code> and <code class="docutils literal notranslate"><span class="pre">upload_with_template_csv_ingester</span></code> sections.</p>
</div>
<p>This method is parameterized with the following values:</p>
<ul class="simple">
<li><p><strong>dataset_id</strong> - The integer value of the ID of the dataset to which
you will be uploading</p></li>
<li><p><strong>source_path</strong> - The path to the file or directory which you want to
upload</p></li>
<li><p><strong>dest_path</strong> (optional) - The name of the file or directory as it should
appear in Citrination.</p></li>
</ul>
<div class="section" id="uploading-a-file-to-citrination">
<h3>Uploading a File To Citrination<a class="headerlink" href="#uploading-a-file-to-citrination" title="Permalink to this headline">¶</a></h3>
<p>The following Python snippet demonstrates the approach for uploading a file with the relative path <code class="docutils literal notranslate"><span class="pre">characterizations/CdTe1.json</span></code> to dataset <strong>1</strong> on Citrination.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;characterizations/CdTe1.json&quot;</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
</pre></div>
</div>
<p>In the web UI, this file will appear as <code class="docutils literal notranslate"><span class="pre">CdTe1.json</span></code> nested in a <code class="docutils literal notranslate"><span class="pre">characterizations</span></code> folder.</p>
</div>
<div class="section" id="uploading-a-file-to-citrination-under-a-new-name">
<h3>Uploading a File To Citrination Under a New Name<a class="headerlink" href="#uploading-a-file-to-citrination-under-a-new-name" title="Permalink to this headline">¶</a></h3>
<p>You can specify the name a file should have once uploaded to Citrination by passing the second parameter to the <code class="docutils literal notranslate"><span class="pre">.upload</span></code> method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;characterizations/CdTe1.json&quot;</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># Pass in the third parameter to upload()</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;CadTel1.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the web UI, this file will appear as <code class="docutils literal notranslate"><span class="pre">CadTel1.json</span></code> at the top level of the dataset.</p>
</div>
<div class="section" id="uploading-a-directory-to-citrination">
<h3>Uploading a Directory To Citrination<a class="headerlink" href="#uploading-a-directory-to-citrination" title="Permalink to this headline">¶</a></h3>
<p>If you pass a directory into the <code class="docutils literal notranslate"><span class="pre">upload()</span></code> method, all the files in the
directory will be recursively uploaded to the dataset. Their paths (relative to the directory specified), will remain intact.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Files uploaded this way will be prefixed with the name of the parent
directory that you originally specify. In other words, if <code class="docutils literal notranslate"><span class="pre">upload()</span></code> is
called with the source path <code class="docutils literal notranslate"><span class="pre">my_folder</span></code>, the dataset on Citrination will
contain files prefixed with <code class="docutils literal notranslate"><span class="pre">my_folder/</span></code>.</p>
</div>
<p>The following code sample uploads the <code class="docutils literal notranslate"><span class="pre">characterizations/</span></code> folder to dataset 1 on Citrination.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">directory_path</span> <span class="o">=</span> <span class="s2">&quot;characterizations/&quot;</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="uploading-a-directory-to-citrination-under-a-new-name">
<h3>Uploading a Directory To Citrination Under a New Name<a class="headerlink" href="#uploading-a-directory-to-citrination-under-a-new-name" title="Permalink to this headline">¶</a></h3>
<p>You can also specify that a folder be renamed when it is uploaded to Citrination. The following code sample uploads the contents of the <code class="docutils literal notranslate"><span class="pre">characterizations/</span></code> directory to a directory called <code class="docutils literal notranslate"><span class="pre">january_characterizations</span></code> on Citrination.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">directory_path</span> <span class="o">=</span> <span class="s2">&quot;characterizations/&quot;</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">,</span> <span class="s2">&quot;january_characterizations/&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="selecting-a-custom-ingester">
<h2>Selecting a Custom Ingester<a class="headerlink" href="#selecting-a-custom-ingester" title="Permalink to this headline">¶</a></h2>
<div class="section" id="finding-an-ingester-by-id">
<h3>Finding an Ingester by ID<a class="headerlink" href="#finding-an-ingester-by-id" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">list_ingesters</span></code> method returns all of the custom ingesters available on
your Citrination deployment. It accepts no parameters, and returns an instance
of <code class="xref py py-class docutils literal notranslate"><span class="pre">IngesterList</span></code>, which itself contains instances of <code class="xref py py-class docutils literal notranslate"><span class="pre">Ingester</span></code>.</p>
<p>The unique field of an <code class="docutils literal notranslate"><span class="pre">Ingester</span></code> is its <code class="docutils literal notranslate"><span class="pre">id</span></code>, so a particular <code class="docutils literal notranslate"><span class="pre">Ingester</span></code>
can be located via the <code class="docutils literal notranslate"><span class="pre">IngesterList#find_by_id</span></code> method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">ingester_list</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">list_ingesters</span><span class="p">()</span>
<span class="n">csv_ingester</span> <span class="o">=</span> <span class="n">ingester_list</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;citrine/ingest template_csv_converter&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="finding-an-ingester-by-searching-its-attributes">
<h3>Finding an Ingester by Searching its Attributes<a class="headerlink" href="#finding-an-ingester-by-searching-its-attributes" title="Permalink to this headline">¶</a></h3>
<p>If you don’t know the <code class="docutils literal notranslate"><span class="pre">id</span></code> of an ingester, you can also search through an
<code class="docutils literal notranslate"><span class="pre">IngesterList</span></code> via the <code class="docutils literal notranslate"><span class="pre">where</span></code> method, which supports searching through a
variety of attributes that can be found in the <code class="docutils literal notranslate"><span class="pre">Ingester.SEARCH_FIELDS</span></code> constant.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="c1"># All ingesters available on your Citrination deployment</span>
<span class="n">ingester_list</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">list_ingesters</span><span class="p">()</span>
<span class="c1"># Find all ingesters whose `name` attributes contain the phrase &quot;xrd&quot;</span>
<span class="c1"># Note that the `where` method returns a new IngesterList</span>
<span class="n">xrd_ingesters</span> <span class="o">=</span> <span class="n">ingester_list</span><span class="o">.</span><span class="n">where</span><span class="p">({</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;xrd&quot;</span> <span class="p">})</span>

<span class="c1"># How many ingesters had names that contained &quot;xrd&quot;?</span>
<span class="nb">print</span><span class="p">(</span><span class="n">xrd_ingesters</span><span class="o">.</span><span class="n">ingester_count</span><span class="p">)</span>
<span class="c1"># 2</span>

<span class="c1"># Quick summary of what those ingesters are</span>
<span class="nb">print</span><span class="p">(</span><span class="n">xrd_ingesters</span><span class="p">)</span>
<span class="c1"># &lt;IngesterList ingester_count=2 ingesters=[</span>
<span class="c1">#   &quot;&lt;Ingester id=&#39;citrine/ingest bruker_xrd_xy_prod&#39;</span>
<span class="c1">#              display_name=&#39;Citrine: Bruker XRD .XY&#39;</span>
<span class="c1">#              description=&#39;Converts Bruker V8 .XY files to PIF .json format.&#39;</span>
<span class="c1">#              num_arguments=&#39;3&#39;&gt;&quot;,</span>
<span class="c1">#   &quot;&lt;Ingester id=&#39;citrine/ingest xrdml_xrd_converter&#39;</span>
<span class="c1">#              display_name=&#39;Citrine: XRD .xrdml&#39;</span>
<span class="c1">#              description=&#39;Converter for .xrdml files from XRD measurements&#39;</span>
<span class="c1">#              num_arguments=&#39;2&#39;&gt;&quot;</span>
<span class="c1"># ]&gt;</span>

<span class="c1"># Supposing we want to go with the one whose display_name is `Citrine: XRD .xrdml`,</span>
<span class="c1"># there are several ways to do this:</span>
<span class="c1"># 1. Indexing into the xrd_ingesters&#39; `ingesters` list:</span>
<span class="n">xrdml_ingester</span> <span class="o">=</span> <span class="n">xrd_ingesters</span><span class="o">.</span><span class="n">ingesters</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 2. Alternatively, using a where clause with the matching `display_name`, `id`,</span>
<span class="c1">#    or other searchable attribute:</span>
<span class="n">xrdml_ingester</span> <span class="o">=</span> <span class="n">xrd_ingesters</span><span class="o">.</span><span class="n">where</span><span class="p">({</span> <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Citrine: XRD .xrdml&quot;</span> <span class="p">})</span><span class="o">.</span><span class="n">ingesters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># 3. Since xrd_ingesters is an `IngesterList`, we could also use `find_by_id` to</span>
<span class="c1">#    avoid having to index into the `ingesters` list:</span>
<span class="n">xrdml_ingester</span> <span class="o">=</span> <span class="n">xrd_ingesters</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;citrine/ingest xrdml_xrd_converter&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Note that the <cite>IngesterList#where</cite> method returns a new instance of <cite>IngesterList</cite>,
and requires indexing into the <cite>IngesterList#ingesters</cite> attribute to ultimately
select an ingester.</p>
</div>
</div>
<div class="section" id="viewing-an-ingester-s-arguments">
<h3>Viewing an Ingester’s Arguments<a class="headerlink" href="#viewing-an-ingester-s-arguments" title="Permalink to this headline">¶</a></h3>
<p>Once you have an <code class="docutils literal notranslate"><span class="pre">Ingester</span></code>, you can check its optional and required arguments
via the <code class="docutils literal notranslate"><span class="pre">Ingester#arguments</span></code> attribute. As seen below, each argument has a <code class="docutils literal notranslate"><span class="pre">name</span></code>,
<code class="docutils literal notranslate"><span class="pre">desc</span></code> (description), <code class="docutils literal notranslate"><span class="pre">type</span></code>, and <code class="docutils literal notranslate"><span class="pre">required</span></code> key.  If you need/want to provide
<code class="docutils literal notranslate"><span class="pre">ingester_arguments</span></code> for an ingester when using the <code class="docutils literal notranslate"><span class="pre">upload_with_ingester</span></code> method,
you will want to ensure that the <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> of your dictionaries match
up to the <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">type</span></code> of those arguments found in <code class="docutils literal notranslate"><span class="pre">Ingester#arguments</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">ingester_list</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">list_ingesters</span><span class="p">()</span>
<span class="n">csv_ingester</span> <span class="o">=</span> <span class="n">ingester_list</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;citrine/ingest template_csv_converter&quot;</span><span class="p">)</span>
<span class="n">formulation_ingester</span> <span class="o">=</span> <span class="n">ingester_list</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;citrine/ingest formulation_csv_converter&quot;</span><span class="p">)</span>
<span class="n">xrdml_ingester</span> <span class="o">=</span> <span class="n">ingester_list</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;citrine/ingest xrdml_xrd_converter&quot;</span><span class="p">)</span>

<span class="c1"># Here we can see that the Template CSV ingester accepts no arguments</span>
<span class="nb">print</span><span class="p">(</span><span class="n">csv_ingester</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
<span class="c1"># []</span>

<span class="c1"># Here we can see that the Formulation CSV ingester accepts one optional argument</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formulation_ingester</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
<span class="c1"># [{ &#39;name&#39;: &#39;check_ingredient_names&#39;,</span>
<span class="c1">#    &#39;desc&#39;: &#39;Whether to check that the names of the ingredients in the formulations are present in this upload&#39;,</span>
<span class="c1">#    &#39;type&#39;: &#39;Boolean&#39;,</span>
<span class="c1">#    &#39;required&#39;: False }]</span>

<span class="c1"># Here we can see that the Citrine: XRD .xrdml ingester requires 2 arguments,</span>
<span class="c1"># one named `sample_id` and the other named `chemical_formula`, both of which</span>
<span class="c1"># should be strings.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">xrdml_ingester</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
<span class="c1"># [{ &#39;name&#39;: &#39;sample_id&#39;,</span>
<span class="c1">#    &#39;desc&#39;: &#39;An ID to uniquely identify the material referenced in the file.&#39;,</span>
<span class="c1">#    &#39;type&#39;: &#39;String&#39;,</span>
<span class="c1">#    &#39;required&#39;: True },</span>
<span class="c1">#  { &#39;name&#39;: &#39;chemical_formula&#39;,</span>
<span class="c1">#    &#39;desc&#39;: &#39;The chemical formula of the material referenced in the file.&#39;,</span>
<span class="c1">#    &#39;type&#39;: &#39;String&#39;,</span>
<span class="c1">#    &#39;required&#39;: True }]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="uploading-data-using-a-custom-ingester">
<h2>Uploading Data Using a Custom Ingester<a class="headerlink" href="#uploading-data-using-a-custom-ingester" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">upload_with_ingester</span></code> method allows for custom ingesters to be used when
uploading a file.</p>
<p>This method is parameterized with the following values:</p>
<ul class="simple">
<li><p><strong>dataset_id</strong> - The integer value of the ID of the dataset to which
you will be uploading</p></li>
<li><p><strong>source_path</strong> - The path to the file that you want to upload and for the
ingester to then process</p></li>
<li><p><strong>ingester</strong> - The custom <code class="docutils literal notranslate"><span class="pre">Ingester</span></code> you want to use</p></li>
<li><p><strong>ingester_arguments</strong> (optional) - Any ingester arguments you want to apply
to the ingester - this should be a list of dicts that contain <code class="docutils literal notranslate"><span class="pre">name</span></code> and
<code class="docutils literal notranslate"><span class="pre">value</span></code> keys</p></li>
<li><p><strong>dest_path</strong> (optional) - The name of the file or directory as it should
appear in Citrination.</p></li>
</ul>
<div class="section" id="ingesting-without-ingester-arguments">
<h3>Ingesting Without Ingester Arguments<a class="headerlink" href="#ingesting-without-ingester-arguments" title="Permalink to this headline">¶</a></h3>
<p>The following Python snippet demonstrates 2 approaches for uploading a file with
the relative path <code class="docutils literal notranslate"><span class="pre">data/formulation.csv</span></code> to dataset <strong>1</strong> on Citrination, one
with a specified destination path and one without (similar to how the <code class="docutils literal notranslate"><span class="pre">upload</span></code>
method works). Both approaches utilize the <code class="docutils literal notranslate"><span class="pre">Formulation</span> <span class="pre">CSV</span></code> ingester with
<code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">ingester</span> <span class="pre">arguments</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;data/formulation.csv&quot;</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ingester_list</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">list_ingesters</span><span class="p">()</span>
<span class="n">formulation_ingester</span> <span class="o">=</span> <span class="n">ingester_list</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;citrine/ingest formulation_csv_converter&quot;</span><span class="p">)</span>

<span class="c1"># Printing the formulation_ingester&#39;s arguments, we can see that it takes one</span>
<span class="c1"># argument that is optional - so we can elect to omit it</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formulation_ingester</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
<span class="c1"># [{ &#39;name&#39;: &#39;check_ingredient_names&#39;,</span>
<span class="c1">#    &#39;desc&#39;: &#39;Whether to check that the names of the ingredients in the formulations are present in this upload&#39;,</span>
<span class="c1">#    &#39;type&#39;: &#39;Boolean&#39;,</span>
<span class="c1">#    &#39;required&#39;: False }]</span>

<span class="c1"># To ingest the file using the file_path as the destination path</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload_with_ingester</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">formulation_ingester</span>
<span class="p">)</span>
<span class="c1"># To ingest the file using a different destination path</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload_with_ingester</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">formulation_ingester</span><span class="p">,</span> <span class="n">dest_path</span><span class="o">=</span><span class="s1">&#39;formulation.csv&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the web UI, this file will appear as either <code class="docutils literal notranslate"><span class="pre">formulation.csv</span></code> nested in a
<code class="docutils literal notranslate"><span class="pre">data</span></code> folder, or <code class="docutils literal notranslate"><span class="pre">formulation.csv</span></code> in the top level of the dataset
depending on whether or not the destination path was provided.</p>
</div>
<div class="section" id="ingesting-with-ingester-arguments">
<h3>Ingesting With Ingester Arguments<a class="headerlink" href="#ingesting-with-ingester-arguments" title="Permalink to this headline">¶</a></h3>
<p>The following Python snippet demonstrates 2 approaches for uploading a file with
the relative path <code class="docutils literal notranslate"><span class="pre">experiments/data.xrdml</span></code> to dataset <strong>1</strong> on Citrination, one
with a specified destination path and one without (similar to how the <code class="docutils literal notranslate"><span class="pre">upload</span></code>
method works). Both approaches utilize the <code class="docutils literal notranslate"><span class="pre">Citrine:</span> <span class="pre">XRD</span> <span class="pre">.xrdml</span></code> ingester with
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">set</span> <span class="pre">of</span> <span class="pre">arguments</span> <span class="pre">provided</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;experiments/data.xrdml&quot;</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ingester_list</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">list_ingesters</span><span class="p">()</span>
<span class="n">xrdml_ingester</span> <span class="o">=</span> <span class="n">ingester_list</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;citrine/ingest xrdml_xrd_converter&quot;</span><span class="p">)</span>

<span class="c1"># Printing the ingester&#39;s arguments, we can see it requires an argument with the</span>
<span class="c1"># name `sample_id`, and another with the name `chemical_formula`, both of which</span>
<span class="c1"># should be strings.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ingester</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
<span class="c1"># [{ &#39;name&#39;: &#39;sample_id&#39;,</span>
<span class="c1">#    &#39;desc&#39;: &#39;An ID to uniquely identify the material referenced in the file.&#39;,</span>
<span class="c1">#    &#39;type&#39;: &#39;String&#39;,</span>
<span class="c1">#    &#39;required&#39;: True },</span>
<span class="c1">#  { &#39;name&#39;: &#39;chemical_formula&#39;,</span>
<span class="c1">#    &#39;desc&#39;: &#39;The chemical formula of the material referenced in the file.&#39;,</span>
<span class="c1">#    &#39;type&#39;: &#39;String&#39;,</span>
<span class="c1">#    &#39;required&#39;: True }]</span>

<span class="n">ingester_arguments</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;sample_id&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;1212&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;chemical_formula&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;NaCl&quot;</span> <span class="p">},</span>
<span class="p">]</span>

<span class="c1"># To ingest the file using the file_path as the destination path</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload_with_ingester</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">xrdml_ingester</span><span class="p">,</span> <span class="n">ingester_arguments</span>
<span class="p">)</span>
<span class="c1"># To ingest the file using a different destination path</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload_with_ingester</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">xrdml_ingester</span><span class="p">,</span> <span class="n">ingester_arguments</span><span class="p">,</span> <span class="s1">&#39;data.xrdml&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the web UI, this file will appear as either <code class="docutils literal notranslate"><span class="pre">data.xrdml</span></code> nested in a
<code class="docutils literal notranslate"><span class="pre">experiments</span></code> folder, or <code class="docutils literal notranslate"><span class="pre">data.xrdml</span></code> in the top level of the dataset
depending on whether or not the destination path was provided.</p>
</div>
<div class="section" id="uploading-using-the-template-csv-ingester">
<h3>Uploading Using the Template CSV Ingester<a class="headerlink" href="#uploading-using-the-template-csv-ingester" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">upload_with_template_csv_ingester</span></code> method abstracts away the logic of
finding the Template CSV ingester, since it is one of the more commonly used
ingesters. The same work can be accomplished by by finding the Template CSV
ingester and using the <code class="docutils literal notranslate"><span class="pre">upload_with_ingester</span></code> method.</p>
<p>This method is parameterized with the following values:</p>
<ul class="simple">
<li><p><strong>dataset_id</strong> - The integer value of the ID of the dataset to which
you will be uploading</p></li>
<li><p><strong>source_path</strong> - The path to the file that you want to upload and for the
Template CSV to then process</p></li>
<li><p><strong>dest_path</strong> (optional) - The name of the file or directory as it should
appear in Citrination.</p></li>
</ul>
<p>The following Python snippet demonstrates 2 approaches for uploading a file with
the relative path <code class="docutils literal notranslate"><span class="pre">experiments/data.csv</span></code> to dataset <strong>1</strong> on Citrination, one
with a specified destination path and one without (similar to how the <code class="docutils literal notranslate"><span class="pre">upload</span></code>
method works). Both approaches utilize the <code class="docutils literal notranslate"><span class="pre">Citrine:</span> <span class="pre">XRD</span> <span class="pre">.xrdml</span></code> ingester with
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">set</span> <span class="pre">of</span> <span class="pre">arguments</span> <span class="pre">provided</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;experiments/data.csv&quot;</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># To ingest the file using the file_path as the destination path</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload_with_template_csv_ingester</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span>
<span class="p">)</span>
<span class="c1"># To ingest the file using a different destination path</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload_with_template_csv_ingester</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">dest_path</span><span class="o">=</span><span class="s1">&#39;data.csv&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the web UI, this file will appear as either <code class="docutils literal notranslate"><span class="pre">data.csv</span></code> nested in a
<code class="docutils literal notranslate"><span class="pre">experiments</span></code> folder, or <code class="docutils literal notranslate"><span class="pre">data.csv</span></code> in the top level of the dataset
depending on whether or not the destination path was provided.</p>
</div>
</div>
<div class="section" id="checking-the-ingest-status-of-a-dataset">
<h2>Checking the Ingest Status of a Dataset<a class="headerlink" href="#checking-the-ingest-status-of-a-dataset" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">get_ingest_status</span></code> method can be used to check the ingestion status of
a dataset. It returns the string <code class="docutils literal notranslate"><span class="pre">Processing</span></code> when data is being ingested
or indexed, and returns the string <code class="docutils literal notranslate"><span class="pre">Finished</span></code> when no data is being processed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">()</span>
<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;test_data/template_example.csv&#39;</span>
<span class="n">client</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">upload_with_template_csv_ingester</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>

<span class="c1"># After uploading, the status will initially be `Processing`</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_ingest_status</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<span class="c1"># Processing</span>

<span class="c1"># After data has finished processing, the status will be `Finished`</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_ingest_status</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<span class="c1"># Finished</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Note that this method does not distinguish between successful and failed data
ingestions - it is simply whether or not data is currently being processed
for the dataset.</p>
</div>
</div>
<div class="section" id="retrieving-files">
<h2>Retrieving Files<a class="headerlink" href="#retrieving-files" title="Permalink to this headline">¶</a></h2>
<p>There are two mechanisms for retrieving data from datasets on Citrination:</p>
<ol class="arabic simple">
<li><p>Request download URLs for previously uploaded files</p></li>
<li><p>Request the contents of a single record in PIF JSON format</p></li>
</ol>
<div class="section" id="file-download-urls">
<h3>File Download URLs<a class="headerlink" href="#file-download-urls" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">DataClient</span></code> class provides several methods for retrieving files
from a dataset:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_dataset_files()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_dataset_file()</span></code></p></li>
</ul>
<p>These two methods will each return URLs which can be used to download
one or more files in a dataset.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Gets a single file named exactly my_file.json</span>

<span class="n">dataset_file</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">get_dataset_file</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;my_file.json&quot;</span><span class="p">)</span>

<span class="n">dataset_file</span><span class="o">.</span><span class="n">url</span>  <span class="c1"># url that can be used to download the file</span>
<span class="n">dataset_file</span><span class="o">.</span><span class="n">path</span> <span class="c1"># the filepath as it appears in Citrination</span>

<span class="c1"># Gets all the files in a dataset, organized by version,</span>
<span class="c1"># represented as a list of DatasetFile objects</span>

<span class="n">dataset_files</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">get_dataset_files</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pif-retrieval">
<h3>PIF Retrieval<a class="headerlink" href="#pif-retrieval" title="Permalink to this headline">¶</a></h3>
<p>A PIF record on Citrination can be retrieved using the <code class="docutils literal notranslate"><span class="pre">DataClient#get_pif</span></code> method.
The record will be returned as a PyPif Pif object. The <code class="docutils literal notranslate"><span class="pre">dataset_version</span></code> and
<code class="docutils literal notranslate"><span class="pre">pif_version</span></code> arguments are optional - by default the PIF returned will be
the current version of the PIF from the current version of the dataset.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">pif_uid</span> <span class="o">=</span> <span class="s2">&quot;abc123&quot;</span>

<span class="c1"># Retrieves the latest version of the PIF with uid is &quot;abc123&quot; from the latest</span>
<span class="c1"># version of dataset 1</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">get_pif</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">pif_uid</span><span class="p">)</span>

<span class="c1"># Retrieves the latest version of the PIF with uid is &quot;abc123&quot; from version 3</span>
<span class="c1"># of dataset 1</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">get_pif</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">pif_uid</span><span class="p">,</span> <span class="n">dataset_version</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>

<span class="c1"># Retrieves the version 2 of the PIF with uid is &quot;abc123&quot; from the latest version</span>
<span class="c1"># of dataset 1</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">get_pif</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">pif_uid</span><span class="p">,</span> <span class="n">pif_version</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Retrieves the version 2 of the PIF with uid is &quot;abc123&quot; from version 3 of</span>
<span class="c1"># dataset 1</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">get_pif</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">pif_uid</span><span class="p">,</span> <span class="n">dataset_version</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">pif_version</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>To get the metadata of a PIF, use the <code class="docutils literal notranslate"><span class="pre">DataClient#get_pif_with_metadata</span></code> method.
This method acts similar to <code class="docutils literal notranslate"><span class="pre">DataClient#get_pif</span></code>, but returns a dictionary
instead of a PyPif Pif object. The resulting dictionary will have two keys:
<cite>“pif”</cite>, which will point to a PyPif Pif object, and <cite>“metadata”</cite>, which will be
a dictionary with <cite>“dataset_id”</cite>, <cite>“dataset_version”</cite>, <cite>“uid”</cite>, <cite>“version”</cite>, and
<cite>“updated_at”</cite> keys.</p>
<p><code class="docutils literal notranslate"><span class="pre">DataClient#get_pif_with_metadata</span></code> has the same method signature as <code class="docutils literal notranslate"><span class="pre">DataClient#get_pif</span></code>,
with optional <code class="docutils literal notranslate"><span class="pre">dataset_version</span></code> and <code class="docutils literal notranslate"><span class="pre">pif_version</span></code> arguments.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="mi">105924</span>
<span class="n">pif_uid</span> <span class="o">=</span> <span class="s2">&quot;1DF1C8EB706363E40546253D5D025D90&quot;</span>

<span class="n">get_pif_with_metadata</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">get_pif_with_metadata</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">pif_uid</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">get_pif_with_metadata</span><span class="p">)</span>
<span class="c1"># {&#39;metadata&#39;: {</span>
<span class="c1">#     &#39;uid&#39;: &#39;1DF1C8EB706363E40546253D5D025D90&#39;,</span>
<span class="c1">#     &#39;version&#39;: 1,</span>
<span class="c1">#     &#39;dataset_id&#39;: &#39;105924&#39;,</span>
<span class="c1">#     &#39;dataset_version&#39;: 1,</span>
<span class="c1">#     &#39;updated_at&#39;: &#39;2017-07-04T19:41:40.139Z&#39;},</span>
<span class="c1">#  &#39;pif&#39;: &lt;pypif.obj.system.chemical.chemical_system.ChemicalSystem at 0x1131b8a50&gt;}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dataset-manipulation">
<h2>Dataset Manipulation<a class="headerlink" href="#dataset-manipulation" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DataClient</span></code> class allows you to create datasets, update their names, descriptions, and permissions, and create new versions of them.</p>
<p>Creating a new version of a dataset bumps the version number on Citrination.
All files uploaded after this point will be uploaded to the new version.</p>
<p>The example below demonstrates how a files in old version of a dataset are not
included in the file count mechanism.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="c1"># Creates a new dataset (permissions default to private)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;My New Dataset&quot;</span><span class="p">)</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">id</span>

<span class="c1"># Uploads a file to it</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="s2">&quot;my_file.json&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data_client</span><span class="o">.</span><span class="n">matched_file_count</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">))</span>
<span class="c1"># -&gt; 1</span>

<span class="c1"># Create a new dataset version</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">create_dataset_version</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">)</span>

<span class="c1"># No files in the new version</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_client</span><span class="o">.</span><span class="n">matched_file_count</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">))</span>
<span class="c1"># -&gt; 0</span>
</pre></div>
</div>
<p>It is also possible to toggle a dataset between being publicly accessible and private to your own user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... client initialization left out</span>
<span class="n">data_client</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">data</span>

<span class="c1"># Creates a new dataset (permissions default to private)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">data_client</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;My New Dataset&quot;</span><span class="p">)</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">id</span>

<span class="c1"># Make the dataset public</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">update_dataset</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">public</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Make the dataset private again</span>
<span class="n">data_client</span><span class="o">.</span><span class="n">update_dataset</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">public</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="models_examples.html" class="btn btn-neutral float-right" title="Models Client Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="initialization.html" class="btn btn-neutral float-left" title="Initialization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Citrine Informatics

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>